# このプロジェクトの目的と要件
## 目次
- [このプロジェクトの目的と要件](#このプロジェクトの目的と要件)
  - [目次](#目次)
  - [開発経緯](#開発経緯)
    - [目標](#目標)
    - [ランニングコストについて](#ランニングコストについて)
    - [どんなアプリケーションを作るか](#どんなアプリケーションを作るか)
    - [どんな機能を備えるか](#どんな機能を備えるか)
  - [要件](#要件)
    - [ハードウェア要件](#ハードウェア要件)
    - [システム要件](#システム要件)
    - [セキュリティ要件](#セキュリティ要件)


## 開発経緯
人生に時間ができたので、何かひとつWEBサービスを作ってみようと思って開発しました。

### 目標
目標は以下の通りです。

* 3層クライアントサーバ型のアプリケーションを作る
* DockerやWebhookを使用して開発プロセスの自動化・簡略化に慣れる
* TypeScriptとGoの記述、npmなどのパッケージ管理に慣れる
* AWSを使用してアプリケーションを構築する
* ドメインや証明書の取得、管理について学習する

### ランニングコストについて
なるべく無料で抑え、最初の1年間でのランニングコストが1万円以下になるように構成します。
また、2年目以降はVPSやレンタルサーバーでの運用に切り替えることができるよう、仮想化や自動か、手順化を心がけます。

### どんなアプリケーションを作るか
サーバーの処理性能の低さや、そもそものマーケティング能力の限界から、「大人数が頻繁に使用するものではないが、周囲の友人が利用してくれるニッチなアプリ」を作成することにしました。

周囲の友人は色々なものをくどくどとレビューするタイプの人間があまりにも多いので、友人の意見も取り入れつつ「詳しいレビュー投稿できるサイト」に決定しました。

### どんな機能を備えるか
* Tier自動作成機能
  * Tierとは、レビューの評価点をある範囲ごとに段組みして、並べた表です。
  * グラフィカルでアクセシビリティの高いTierを簡単に作成できるよう実装します。
* グラフィカルなレビュー
  * レビューは細かく採点したいのですが、その評価を他者に伝えるためには見せ方の工夫が必要です。`レーダーチャート`や色分けなどを駆使して見やすいレビューを作成する機能を実装します。
* ユーザー作成のしきい
  * まず、ログインしないとレビューが表示できないようなサイトでは伝える力が弱すぎます。あらゆるレビューとTierは`ログインしなくても表示`できるようにする必要があります。
  * ログイン時にメール認証などを必要とすると入力の手間が増えてユーザーの負担になります。また、パスワードの管理など余計なコストを下げるため、OAuth認証を利用した`外部サービス連携`でログインできるように実装します。
* SNSへのシェア機能
  * このシステム単体では情報共有能力が低いので、シェアボタンを実装します。
  * SNSで大きく画像を表示できる`OGP`を設定することで投稿を強調できるようにします。
* スマートフォンとPCの両方で操作しやすいデザイン
  * すべてのページをレスポンシブにデザインします。
  * 入力が細かくなるところは「詳細設定」のような別の場所に退避し、ヘビーユーザー向けの自由度を担保しつつライトユーザーへの負荷を軽減します。
* 検索機能
  * Tierとレビューは誰でも検索できるように実装します。
* 通知機能
  * メンテナンス時間等をユーザーへ通知するための機能を実装します。
* ブックマーク機能（未実装）
  * ユーザーが他ユーザーの投稿にブックマークを設定できるようにします。

## 要件

### ハードウェア要件
`AWS EC2 t2.micro`で実行可能な範囲とします。

### システム要件
* フロントエンド
  * SPA（シングルページアプリケーション）
    * サーバーの負荷軽減のため、クライアントサイドで描画
* バックエンド
  * Rest API
    * シンプルなスキームでデータを管理
    * ただし、ログアウトは必須なのでステートレスではないもの
  * コンパイル型言語
    * マシンスペックが低いため、メモリ効率や動作速度が高いものを選定
* データベース
  * RDBMS、NoSQLどちらでも良い

### セキュリティ要件
* 全般
  * 認証基盤
    * 管理・実装コストを下げるため、外部サービスのOAuth認証を利用し、本アプリケーション内ではトークン（一時保管）と固有ID（ユーザーが存在する間）のみ管理する
    * ユーザーには連携サービスのトークンを開示せず、アプリケーションが発行したベアラートークンを送付する。
  * HTTPSプロトコル
    * サーバ証明書を取得する
    * プロキシでHTTPプロトコルを禁止する
  * XSS対策
    * フレームワークでスクリプトの実行を制御する
  * アクセス制限
    * Amazon VPCおよびプロキシでアクセス制限を設定する
* フロントエンド
  * Cookieの不使用
    * LocalStorageを使用する
* バックエンド
  * ブルートフォースアタック対策
    * プロキシでリクエスト間隔を制限する
    * 明示的なトークン破棄機能を実装する
    * トークンに期限を設定する
  * DoS対策
    * プロキシでリクエスト間隔を制限する
    * プロキシで最大リクエストサイズを制限する
    * 処理コストの大きい処理の連続実行をアプリケーション側で禁止する
  * SQLインジェクション対策
    * 対策可能なORMを導入する
    * アプリケーションで不正な文字列に対してエラー処理する
  * 乗っ取り
    * 使用するすべてのプラットフォームに二段階認証を設定する
    * アプリケーションの管理者画面に二段階認証を実装する
  * 脆弱性対策
    * パッケージ管理ソフトを導入し、各パッケージのバージョン管理を行う
  * ディレクトリ・トラバーサル対策
    * アプリケーションで不正な文字列に対してエラー処理する
